---
title: "Habitat_Model_VZH"
format: html
---

# Clear R environment 
```{r}
#clear R environment ---------------------------------------
rm(list = ls())
```

```{r}

```

# Install and load packages 
```{r}
# check for a package, install and load ---------------------------------------
pkgCheck <- function(x){ 
  if (!require(x,character.only = TRUE)){
    install.packages(x,dependencies=TRUE)
    if(!require(x,character.only = TRUE)) {
      stop()
    }
  }
}

pkgCheck("raster")
pkgCheck("spsurvey")
pkgCheck("terra")
pkgCheck("raster")
pkgCheck("ggplot2")
pkgCheck("tibble")
pkgCheck("readr")
pkgCheck("dplyr")
pkgCheck("tidyr")
pkgCheck("scales")
```

# Habitat Model Calculation
```{r}
# Test: L2 discharge 2.4 m3/s
Test <- foen_hm(raster_path = "Data/raster_files/Landquart_results_velocity_2.tif", base_flow = "Data/raster_files/Landquart_results_velocity_2.tif", output_path_pers_reclass = "Data/results_univariate/raster_persistent_2.tif", output_path_reclass = "Data/results_univariate/raster_classify_2.tif", HSC_path = "Data/HSC_MI/HSC_MI.csv", output_path_hm = "Data/results_univariate/VZH_2_TTTT.tif", output_path_hm_persistent = "Data/results_univariate/VZH_2_persistentt.tif", river = "L2", discharge = 2.4)

Test2 <- foen_hm(raster_path = "Data/raster_files/Landquart_results_velocity_18.tif", base_flow = "Data/raster_files/Landquart_results_velocity_2.tif", output_path_pers_reclass = "Data/results_univariate/raster_persistent_18.tif", output_path_reclass = "Data/results_univariate/raster_classify_18.tif", HSC_path = "Data/HSC_MI/HSC_MI.csv", output_path_hm = "Data/results_univariate/VZH_18_Test.tif", output_path_hm_persistent = "Data/results_univariate/VZH_18_persistentt.tif", river = "L2", discharge = 18.6)
```

# Bind Metric Results 
```{r}
# metrics
together <- rbind(Test$metrics, Test2$metrics)

# safe df into .csv file -----------------------------------
write.csv(results_VZH, file = "results_statistics/Results_VZH_Habitat_Model.csv", row.names = FALSE)

# freq_tables
together1 <- rbind(Test$freq, Test2$freq)

# write data frame into .csv file
write.csv(join, file = "results_statistics/VZH.csv", row.names = FALSE)
```




